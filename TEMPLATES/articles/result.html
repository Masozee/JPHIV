{% extends 'articles/base.html' %}
{% load class_name %}
{% load static %}

{% block css%}
    <!-- my css -->
    <link rel="stylesheet" href="{% static 'articles/css/index.css' %}">
    <link rel="stylesheet" href="{% static 'articles/css/search-result.css' %}">

{% endblock %}

{% block content %}

    <!-- header 2 -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light sub-nav">
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="#">ABSTRACT <span class="sr-only">(current)</span></a>
          </li>
         <li class="nav-item">
            <a class="nav-link" href="{% url 'abstract-epidemology' %}">EPIDEMOLOGY</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'abstract-biomedicine' %}">BIOMEDICINE</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'abstract-health' %}">HEALTH ECONOMIC</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'abstract-policy' %}">POLICY STUDY</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'abstract-social' %}">SOCIAL-BEHAVIORAL</a>
          </li>
        </ul>

        <ul class="navbar-nav ml-auto popular-search">
          <li class="nav-item active">
            <a class="nav-link" href="#">POPULAR SEARCH <span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'abstract-epidemology' %}">EPIDEMOLOGY</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'abstract-biomedicine' %}">BIOMEDICINE</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'abstract-health' %}">HEALTH ECONOMIC</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'abstract-policy' %}">POLICY STUDY</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'abstract-social' %}">SOCIAL-BEHAVIORAL</a>
          </li>
        </ul>
      </div>
    </nav>
    <!-- end header 2 -->


      <!-- TITLE -->
      <section class="title-searchResult">
        <div class="container">
            <div class="row">
                <div class="col-md-5">
                    <h2> SEARCH RESULT PAGE</h2>
                    <h3>{{count}} hasil pencarian untuk kata kunci “{{query | upper}}”</h3>
                </div>
            </div>
        </div>
      </section>
      <!-- END TITLE -->



      <!-- FILTER -->
      <section class="filter-epidemiology " >
        <div class="container ">
          <!-- FILTER COLLAPSE -->
          <div class="d-flex justify-content-end">
            <button class="btn btn-danger btn-sm d-flex justify-content-end" type="button" data-toggle="collapse" data-target="#collapseFilter" aria-expanded="false" aria-controls="collapseExample">
              <i> <img src="img/filter.svg" alt=""></i> FILTER
            </button>
          </div>

          <!-- END FILTER COLLAPSE -->
          <hr>
            <div class="row collapse"  id="collapseFilter">
              <div class="col-md">
                <form action="">
                  <div class="form-group">
                    <label for="sub-cat">sub category</label>
                    <input type="text" class="form-control form-control-sm" id="sub-cat">
                  </div>
                </form>
              </div>
              <div class="col-md">
                <form action="">
                  <div class="form-group">
                    <label for="filter1">Filter 1</label>
                    <input type="text" class="form-control form-control-sm" id="filter1">
                  </div>
                </form>
              </div>
              <div class="col-md">
                <form action="">
                  <div class="form-group">
                    <label for="filter2">Filter 2</label>
                    <input type="text" class="form-control form-control-sm" id="filter2">
                  </div>
                </form>
              </div>
              <div class="col-md">
                <form action="">
                  <div class="form-group">
                    <label for="filter3">Filter 3</label>
                    <input type="text" class="form-control form-control-sm" id="filter3">
                  </div>
                </form>
              </div>
              <div class="col-md">
                <form action="">
                  <div class="form-group">
                    <label for="filter4">Filter 4</label>
                    <input type="text" class="form-control form-control-sm" id="filter4">
                  </div>
                </form>
              </div>
            </div>
          <hr>
        </div>
      </section>
      <!-- END FILTER -->

    <!-- new entri -->
    <section>
      <div class="container new-entry">
        <div class="row row-cols-md-3">
            {% for object in object_list %}
              {% with object|class_name as klass %}

                {% if klass == 'AbstractJPHIV' %}
                  <div class="col-md-4 mb-4">
                    <div class="card h-100">
                      <div class="card-body">
                        <a href="/abstract/{{object.judul | slugify | lower}}"><h5 class="card-title">{{ object.judul }}</h5></a>
                        <h6 class="autor"><i><img src="{% static 'articles/img/autor.svg' %}" alt="" srcset=""></i>
                          {% for tag in object.authors.all %}
                            <a href="/author/{{ tag.name | slugify}}" style="font-size: x-small;">{{ tag.name }}</a>
                          {% endfor %}</h6>
                        <h6 class="date"><i><img src="{% static 'articles/img/date.svg' %}" alt=""></i>{{object.tgl}}</h6>
                        <span class="card-text">{{object.abstrak | truncatechars:"200" |safe}}</span>
                      </div>
                      <div class="card-footer">
                        <ul class="list-inline">
                          <li class="list-inline-item"><i><img src="{% static 'articles/img/download.svg' %}" alt=""></i> Unduh</li>
                          <li class="list-inline-item"><i><img src="{% static 'articles/img/share.svg' %}" alt=""></i> Bagikan</li>
                        </ul>
                        <hr>
                      </div>
                    </div>
                  </div>
                {% elif klass == 'AnotatedJPHIV' %}
                  <div class="col-md-4 mb-4">
                    <div class="card h-100">
                      <div class="card-body">
                        <a href="/annotated-bibliography/{{object.judul|slugify|lower}}"><h5 class="card-title">{{ object.judul }}</h5></a>
                        <h6 class="autor"><i><img src="{% static 'articles/img/autor.svg' %}" alt="" srcset=""></i>
                          annotated by: {{object.added_by.first_name}}
                        <h6 class="date"><i><img src="{% static 'articles/img/date.svg' %}" alt=""></i>{{object.tgl}}</h6>
                        <span class="card-text">{{object.anotated | truncatechars:"200" |safe}}</span>
                      </div>
                      <div class="card-footer">
                        <ul class="list-inline">
                          <li class="list-inline-item"><i><img src="{% static 'articles/img/download.svg' %}" alt=""></i> Unduh</li>
                          <li class="list-inline-item"><i><img src="{% static 'articles/img/share.svg' %}" alt=""></i> Bagikan</li>
                        </ul>
                        <hr>
                      </div>
                    </div>
                  </div>
                {% endif %}
              {% endwith %}
            {% endfor %}
        </div>
      </div>
    </section>
    <!-- end new entry -->

{% if is_paginated %}
   <section class="pagination mt-3">
      <div class="container">
       <div class="row justify-content-md-center">
          <div class="col-md-auto ">
            <nav aria-label="Page navigation example">
              <ul class="pagination">
                {% if page_obj.has_previous %}
                <li class="page-item">
                  <a class="page-link" href="?page=1&q={{request.GET.q}}" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                    <span class="sr-only">Previous</span>
                  </a>
                </li>
                {% endif %}
                {% for n in page_obj.paginator.page_range %}
                    {% if page_obj.number == n %}
                      <li class="page-item">
                        <span class="page-link">{{ n }}<span class="sr-only">(current)</span></span>
                      </li>
                    {% elif n > page_obj.number|add:'-2' and n < page_obj.number|add:'2' %}
                      <li class="page-item"><a class="page-link" href="?page={{ n }}&q={{request.GET.q}}">{{ n }}</a></li>
                    {% endif %}
                {% endfor %}
                {% if page_obj.has_next %}
                  <li class="page-item">
                    <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}&q={{request.GET.q}}" aria-label="Next">
                      <span aria-hidden="true">&raquo;</span>
                      <span class="sr-only">Next</span>
                    </a>
                  </li>
                {% endif %}
              </ul>
            </nav>
          </div>
        </div>
      </div>
    </section>
{% endif %}
  {% endblock %}